@page
@model IndexModel
@{
    ViewData["Title"] = "Home Page";
}
<div class="terminal">
    <p class="line1">$ dotnet new <span class="cursor1">_</span></p>
</div>

@*<div class="terminal">
    <div class="fakeScreen">
        <p class="line1">$ dotnet new <span class="cursor1">_</span></p>
    </div>
</div>*@

<div id="content">
    <section class="main-content-section" id="searchAndStats">
        <form id="search-form" method="POST">
            <input asp-for="SearchText" required />
            @*<button id="search-button" type="submit">Search templates</button>*@
            <a href="#" onclick="document.getElementById('search-form').submit();" class="button4">Search</a>
        </form>

        <ul id="overallStats">
            <li>Overall downloads:       <integer>@String.Format("{0:n0}", @Model.OverallDownloads)</integer></li>
            <li>Num of templates:        <integer>@String.Format("{0:n0}", @Model.NumTemplates)</integer></li>
            <li>Num of template packs:   <integer>@String.Format("{0:n0}", @Model.NumTemplatePacks)</integer></li>
            <li>Num of template authors: <integer>@String.Format("{0:n0}", @Model.NumAuthors)</integer></li>
        </ul>
    </section>

    <section>
        @foreach (var tp in Model.TemplatePacks) {
            <section class="template-pack">
                <h3>
                    @if (!string.IsNullOrWhiteSpace(tp.IconUrl)) { 
                    <img class="pkgIcon" src="@tp.IconUrl" alt="icon" />
                    }
                    <a href="/pack/@tp.Package">@tp.Package</a>
                </h3>
                <quote class="template-description">@tp.Description</quote>

                <details class="template-details">
                    <summary>@tp.Package.Count() templates</summary>
                    <ul class="template-list">
                        @foreach (var t in tp.Templates) {
                            <li><a href="/template/@t.TemplatePackId/@t.Identity">@t.Name</a></li>
                        }
                    </ul>
                </details>
                <ul class="template-metadata">
                    <li><p>downloads: @String.Format("{0:n0}", @tp.DownloadCount)</p></li>
                    <li>by: <a href="/search/@tp.Authors">@tp.Authors</a></li>
                </ul>
                
                @*<ul class="template-metadata">
                    <li> |</li>
                    <li>
                        <img src="~/images/icon-download.png" alt="icon" />
                        downloads: @String.Format("{0:n0}", @tp.DownloadCount) |
                    </li>
                    @if (!string.IsNullOrWhiteSpace(tp.ProjectUrl)) {
                        <li><a href="@tp.ProjectUrl"><img src="~/images/icon-globe.png" alt="site icon" /> go to project</a> |</li>

                    }
                    @if (!string.IsNullOrWhiteSpace(tp.LicenseUrl)) {
                        <li><a href="@tp.LicenseUrl"><img src="~/images/icon-license.png" alt="license icon" /> license</a> |</li>

                    }
                    @if (!string.IsNullOrWhiteSpace(tp.Copyright)) {
                        <li>Copyright: @tp.Copyright.Replace("Copyright ", "")</li>
                    }
                </ul>*@

            </section>
        }
    </section>
</div>